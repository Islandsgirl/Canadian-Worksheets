<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Canadian Worksheets</title>
  <style>
    :root{
      --bg:#f8f9fa;--card:#fff;--text:#2c3e50;--muted:#666;--border:#ccd2d9;--accent:#2d7ff9;--ok:#27ae60;--warn:#ff8c00
    }
    *{box-sizing:border-box}
    body {font-family: Arial, sans-serif;margin: 2rem;background-color: var(--bg);color:var(--text)}
    h1 {color: var(--text);margin:0 0 1rem}
    h2 {margin-top: 2rem}
    label, select, input, button, textarea {display: block;margin-top: .6rem;font-size: 1rem}
    textarea{width:100%;min-height:70px}
    .section {padding: 1.25rem;background: var(--card);border: 1px solid var(--border);margin-bottom: 2rem;border-radius:8px}
    .row{display:flex;flex-wrap:wrap;gap:1rem}
    .col{min-width:220px;flex:1}
    .controls-inline {display:flex;gap:.75rem;flex-wrap:wrap;align-items:center;margin-top:.6rem}
    .btn{background:var(--accent);color:#fff;border:0;padding:.6rem .9rem;border-radius:6px;cursor:pointer}
    .btn.secondary{background:#6c757d}
    .btn.success{background:var(--ok)}
    .btn.ghost{background:#e9eef9;color:#1b3b88}
    .muted{color:var(--muted);font-size:.9rem}

    /* Category cards */
    .grid-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}
    .card{background:#fff;border:1px solid var(--border);padding:1rem;border-radius:8px}
    .card h3{margin:.2rem 0 .4rem}
    .pill{display:inline-block;background:#eef;border:1px solid #99a;padding:.1rem .45rem;border-radius:999px;font-size:.85rem;margin:.1rem .25rem 0 0;cursor:pointer}

    /* Worksheet rendering */
    .worksheet-preview {margin-top: 2rem}
    .ack{border:1px dashed #9bb3ff;background:#f4f7ff;padding:10px;border-radius:8px;margin:0 0 1rem 0}
    .page{page-break-after:always;border:1px solid var(--border);background:#fff;margin:0 0 1.25rem;padding:1rem;border-radius:8px}
    .page:last-child{page-break-after:auto}
    .worksheet-header {display:flex;justify-content:space-between;margin-bottom: .75rem;border-bottom:1px solid var(--border);padding-bottom:.5rem}
    .worksheet-grid {display: grid;grid-template-columns: repeat(3, 1fr);gap: .9rem;font-size: 1.12rem}
    .problem{min-height:2.4rem;border-bottom:1px dashed #ddd;padding:.2rem .25rem;display:flex;align-items:center;justify-content:space-between;gap:.5rem}
    .decor{opacity:.95;font-size:1.1rem}
    .thumb{height:24px;width:24px;object-fit:cover;border-radius:4px;border:1px solid #ddd}
    .answer-key{margin-top:1rem;border-top:2px solid #999;padding-top:.75rem}
    .example{border:1px solid #d3e2ff;background:#f0f6ff;border-radius:8px;padding:.75rem;margin:.5rem 0 1rem}
    .example h4{margin:.1rem 0 .4rem;font-size:1.05rem}
    .tag{display:inline-block;background:#eef;border:1px solid #99a;padding:.05rem .45rem;border-radius:999px;font-size:.8rem;margin-right:.35rem}

    footer {margin-top: 3rem;font-size: 0.9rem;color: var(--muted)}
  </style>
</head>
<body>
  <h1>üåê Canadian Worksheet Generator</h1>

  <!-- LANGUAGE ARTS -->
  <div class="section">
    <h2>üìö Language Arts</h2>
    <p class="muted">Short, student-friendly news with multi-level activities.</p>
    <div class="controls-inline">
      <a class="btn secondary" href="reading.html">Open Reading Comprehension</a>
    </div>
  </div>

  <!-- MATH LANDING -->
  <div class="section">
    <h2>‚ûó Math: Choose a Section</h2>
    <div class="grid-cards">
      <div class="card">
        <h3>Basic Operations</h3>
        <div>
          <button class="pill" data-type="add">Addition</button>
          <button class="pill" data-type="sub">Subtraction</button>
          <button class="pill" data-type="mul">Multiplication</button>
          <button class="pill" data-type="div">Division</button>
        </div>
      </div>
      <div class="card">
        <h3>Measurement</h3>
        <div>
          <button class="pill" data-type="measure">Metric Conversions</button>
          <button class="pill" data-type="time">Telling Time</button>
          <button class="pill" data-type="thermo">Thermometers</button>
        </div>
      </div>
      <div class="card">
        <h3>Money & Life Skills</h3>
        <div>
          <button class="pill" data-type="money">Money / Currency</button>
          <button class="pill" data-type="receipts">Add Receipts</button>
          <button class="pill" data-type="percent">Percent & Discounts</button>
        </div>
      </div>
      <div class="card">
        <h3>Word Problems</h3>
        <div>
          <button class="pill" data-type="word">Simplified Word Problems</button>
        </div>
      </div>
    </div>
    <p class="muted" style="margin-top:.6rem">Tip: Pick a section above to auto-select options below.</p>
  </div>

  <!-- MATH OPTIONS -->
  <div class="section" id="mathSection">
    <h2 id="mathHeading">Worksheet Options</h2>
    <div class="row">
      <div class="col">
        <label for="mathType">Math type</label>
        <select id="mathType">
          <option value="add">Addition</option>
          <option value="sub">Subtraction</option>
          <option value="mul">Multiplication</option>
          <option value="div">Division</option>
          <option value="money">Money / Currency</option>
          <option value="measure">Measurement (metric)</option>
          <option value="time">Telling Time</option>
          <option value="thermo">Thermometer Reading</option>
          <option value="receipts">Add Receipts</option>
          <option value="percent">Percent Problems</option>
          <option value="word">Word Problems (simplified)</option>
        </select>
      </div>
      <div class="col" id="numRanges">
        <label for="rangeA">Number range A (min‚Äìmax)</label>
        <input id="rangeA" type="text" value="0-20" placeholder="e.g., 0-20" />
        <span class="muted">Used by +, ‚àí, √ó, √∑</span>
        <label for="rangeB">Number range B (min‚Äìmax)</label>
        <input id="rangeB" type="text" value="0-20" placeholder="e.g., 0-20" />
      </div>
      <div class="col">
        <label for="pages">Pages</label>
        <input id="pages" type="number" min="1" max="20" value="1" />
      </div>
      <div class="col">
        <label for="perPage">Problems per page</label>
        <input id="perPage" type="number" min="6" max="60" value="24" />
      </div>
      <div class="col">
        <label for="layoutMode">Layout</label>
        <select id="layoutMode">
          <option value="3">Horizontal (3 columns)</option>
          <option value="2">2 columns</option>
          <option value="1">Vertical (1 column)</option>
        </select>
      </div>
    </div>

    <!-- MONEY OPTIONS -->
    <div class="row" id="moneyRow" style="margin-top:.5rem;display:none;">
      <div class="col">
        <label for="currency">Currency</label>
        <select id="currency">
          <option value="CAD">CAD ‚Äì $ (Canadian)</option>
          <option value="USD">USD ‚Äì $ (United States)</option>
          <option value="EUR">EUR ‚Äì ‚Ç¨ (Euro)</option>
          <option value="GBP">GBP ‚Äì ¬£ (Pound)</option>
          <option value="JPY">JPY ‚Äì ¬• (Yen)</option>
        </select>
      </div>
      <div class="col">
        <label for="moneyMode">Money problem type</label>
        <select id="moneyMode">
          <option value="sum">Count the total value</option>
          <option value="make">Make this amount</option>
          <option value="change">Change from amount</option>
        </select>
      </div>
      <div class="col">
        <label for="moneySumStyle">If "Count the total" ‚Üí style</label>
        <select id="moneySumStyle">
          <option value="target">Show a target amount (students write coins/bills)</option>
          <option value="coins" selected>Show a list of coins/bills (students write the total)</option>
        </select>
      </div>
      <div class="col" id="billCol" style="display:none;">
        <label for="billGiven">Bill given (for Change)</label>
        <select id="billGiven"></select>
      </div>
    </div>

    <!-- WORD PROBLEM OPTIONS (clean, single block) -->
    <div class="row" id="wordRow" style="margin-top:.5rem;display:none;">
      <div class="col">
        <label for="wpLevel">Reading level</label>
        <select id="wpLevel">
          <option value="easy">Easy</option>
          <option value="medium" selected>Medium</option>
          <option value="hard">Hard</option>
        </select>

        <label for="wpEmoji">Emoji support</label>
        <select id="wpEmoji">
          <option value="many">Many üòä</option>
          <option value="some" selected>Some üôÇ</option>
          <option value="none">None</option>
        </select>

        <label><input type="checkbox" id="wpLocalLangToggle"/> Render worksheet in local language (beta)</label>
        <span class="muted">Uses a placeholder translator. We‚Äôll swap in FirstVoices later.</span>
      </div>

      <div class="col">
        <label for="wpTown">Town / City</label>
        <input id="wpTown" type="text" placeholder="e.g., Port Hardy" />
        <label for="wpProvince">Province / State</label>
        <input id="wpProvince" type="text" value="BC" />
        <label for="wpCountry">Country</label>
        <input id="wpCountry" type="text" value="Canada" />
      </div>

      <div class="col">
        <label for="wpNationSelect">Nation / Territory (BC)</label>
        <select id="wpNationSelect"></select>

        <label for="wpLang">Local language (auto)</label>
        <input id="wpLang" type="text" placeholder="auto" />

        <label for="wpPhrases">Phrases (auto; editable)</label>
        <textarea id="wpPhrases" placeholder="Hello / Thank you, etc."></textarea>

        <label><input type="checkbox" id="wpAckToggle" checked/> Include territorial acknowledgement</label>
      </div>
    </div>

    <!-- TIME OPTIONS -->
    <div class="row" id="timeRow" style="margin-top:.5rem;display:none;">
      <div class="col">
        <label for="timeFormat">Time format</label>
        <select id="timeFormat">
          <option value="digital">Digital (HH:MM)</option>
          <option value="analog">Analog (describe clock)</option>
        </select>
      </div>
      <div class="col">
        <label for="timeStep">Minute steps</label>
        <select id="timeStep">
          <option value="5">5 minutes</option>
          <option value="1">1 minute</option>
          <option value="15">15 minutes</option>
        </select>
      </div>
      <div class="col">
        <label for="timeSystem">Clock</label>
        <select id="timeSystem">
          <option value="12">12-hour</option>
          <option value="24">24-hour</option>
        </select>
      </div>
    </div>

    <!-- THERMOMETER OPTIONS -->
    <div class="row" id="thermoRow" style="margin-top:.5rem;display:none;">
      <div class="col">
        <label for="tempScale">Temperature scale</label>
        <select id="
