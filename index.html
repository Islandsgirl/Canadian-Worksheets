<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Canadian Worksheets</title>
  <style>
    :root{--bg:#f7f8fa;--card:#fff;--text:#233245;--muted:#637083;--border:#d4dbe4;--accent:#2d7ff9}
    *{box-sizing:border-box}
    body{font-family:Arial,Helvetica,sans-serif;margin:2rem;background:var(--bg);color:var(--text)}
    h1{margin:0 0 .5rem} h2{margin:2rem 0 .75rem}
    .sub{color:var(--muted)}
    label,select,input,button,textarea{display:block;margin-top:.6rem;font-size:1rem}
    select,input,textarea{padding:.5rem;border:1px solid var(--border);border-radius:.4rem;background:#fff;max-width:560px;width:100%}
    textarea{min-height:90px}
    .row{display:flex;gap:1rem;flex-wrap:wrap}
    .row>*{flex:1 1 280px;min-width:240px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:.6rem;padding:1rem;margin-top:1rem;box-shadow:0 2px 6px rgba(0,0,0,.05)}
    button{margin-top:1rem;padding:.65rem 1rem;background:var(--accent);color:#fff;border:none;border-radius:.45rem;cursor:pointer}
    button.secondary{background:#e9eefc;color:#234;border:1px solid #c9d7ff}
  </style>
</head>
<body>
  <h1>Canadian Worksheets</h1>
  <div class="sub">Simple headers with Name, Date, and Instructions — switch labels to English, French, or your own Indigenous language.</div>

  <!-- Worksheet Header controls -->
  <h2>Worksheet Header</h2>
  <div class="row">
    <div>
      <label for="label-lang">Header language:</label>
      <select id="label-lang">
        <option value="en">English</option>
        <option value="fr">Français</option>
        <option value="custom">Custom (Indigenous)</option>
      </select>
    </div>

    <div id="custom-labels" style="display:none">
      <label for="lbl-name">Name label (Indigenous):</label>
      <input id="lbl-name" placeholder="Type your word for ‘Name’…" />
      <label for="lbl-date" style="margin-top:.6rem">Date label (Indigenous):</label>
      <input id="lbl-date" placeholder="Type your word for ‘Date’…" />
      <label for="lbl-instr" style="margin-top:.6rem">Instructions label (Indigenous):</label>
      <input id="lbl-instr" placeholder="Type your word for ‘Instructions’…" />
      <button class="secondary" id="save-custom-labels">Save labels</button>
    </div>
  </div>

  <!-- Live preview of the header -->
  <div class="card" id="live-header-preview" style="margin-top:1rem">
    <div class="row">
      <div>
        <label id="labelName">Name</label>
        <input />
      </div>
      <div>
        <label id="labelDate">Date</label>
        <input type="date" />
      </div>
    </div>
    <label id="labelInstr" style="margin-top:.6rem">Instructions</label>
    <textarea placeholder="Write clear, simple instructions for students…"></textarea>
  </div>

  <!-- Simple worksheet generators so you can test the header insertion -->
  <h2>Generate a Worksheet</h2>
  <div class="row">
    <div>
      <label for="language-topic">Language Arts topic:</label>
      <select id="language-topic">
        <option value="reading">Reading Comprehension</option>
        <option value="writing">Writing Prompts</option>
        <option value="spelling">Canadian Spelling Practice</option>
      </select>
      <button onclick="generateWorksheet('language')">Generate Language Arts Worksheet</button>
    </div>
    <div>
      <label for="math-topic">Math topic:</label>
      <select id="math-topic">
        <option value="money">Canadian Money Problems</option>
        <option value="measurement">Metric Measurement</option>
        <option value="fractions">Fractions</option>
      </select>
      <button onclick="generateWorksheet('math')">Generate Math Worksheet</button>
    </div>
  </div>

  <h2>Your Generated Items</h2>
  <div id="worksheets-container"></div>

  <script>
    /******** Labels: EN, FR, or Custom (Indigenous) ********/
    const LABEL_PACKS = {
      en: { name: "Name", date: "Date", instr: "Instructions" },
      fr: { name: "Nom",  date: "Date", instr: "Consignes" },
    };
    const CUSTOM_KEY = "cw_custom_indig_labels";

    // Get elements
    const langSel = document.getElementById("label-lang");
    const customBox = document.getElementById("custom-labels");
    const lblNameIn = document.getElementById("lbl-name");
    const lblDateIn = document.getElementById("lbl-date");
    const lblInstrIn = document.getElementById("lbl-instr");
    const saveCustomBtn = document.getElementById("save-custom-labels");
    const labelName = document.getElementById("labelName");
    const labelDate = document.getElementById("labelDate");
    const labelInstr = document.getElementById("labelInstr");

    // Load previously saved custom labels
    (function loadCustom(){
      try {
        const saved = JSON.parse(localStorage.getItem(CUSTOM_KEY) || "{}");
        if(saved.name) lblNameIn.value = saved.name;
        if(saved.date) lblDateIn.value = saved.date;
        if(saved.instr) lblInstrIn.value = saved.instr;
      } catch {}
    })();

    function getActiveLabels(){
      const mode = langSel.value;
      if (mode === "custom") {
        return {
          name: lblNameIn.value.trim() || "—",
          date: lblDateIn.value.trim() || "—",
          instr: lblInstrIn.value.trim() || "—",
        };
      }
      return LABEL_PACKS[mode] || LABEL_PACKS.en;
    }

    function applyLabelsToPreview(){
      const L = getActiveLabels();
      labelName.textContent = L.name;
      labelDate.textContent = L.date;
      labelInstr.textContent = L.instr;
    }

    langSel.addEventListener("change", () => {
      const isCustom = langSel.value === "custom";
      customBox.style.display = isCustom ? "block" : "none";
      applyLabelsToPreview();
    });

    saveCustomBtn.addEventListener("click", () => {
      const payload = {
        name: lblNameIn.value.trim(),
        date: lblDateIn.value.trim(),
        instr: lblInstrIn.value.trim()
      };
      localStorage.setItem(CUSTOM_KEY, JSON.stringify(payload));
      applyLabelsToPreview();
      saveCustomBtn.textContent = "Saved ✓";
      setTimeout(()=> saveCustomBtn.textContent = "Save labels", 1000);
    });

    // Basic worksheet generator + header insertion
    function generateWorksheet(subject){
      const topic = subject === "language" 
        ? document.getElementById("language-topic").value
        : document.getElementById("math-topic").value;

      const container = document.getElementById("worksheets-container");
      const card = document.createElement("div");
      card.className = "card";
      const dateStr = new Date().toLocaleDateString();

      // Build header using current labels
      const L = getActiveLabels();
      const headerHTML = `
        <div class="card" style="margin-top:0">
          <div class="row">
            <div>
              <label>${L.name}</label>
              <input />
            </div>
            <div>
              <label>${L.date}</label>
              <input type="date" />
            </div>
          </div>
          <label style="margin-top:.6rem">${L.instr}</label>
          <textarea></textarea>
        </div>`;

      card.innerHTML = `
        <h3>${subject.toUpperCase()} • ${topic}</h3>
        <div class="sub" style="margin-bottom:.5rem">Generated on ${dateStr}</div>
        ${headerHTML}
        <p>Starter outline for a <strong>${subject}</strong> worksheet on <strong>${topic}</strong>.</p>
        <ul class="sub" style="margin-left:1rem">
          <li>Objective: …</li>
          <li>Questions: …</li>
          <li>Answer key: …</li>
        </ul>
      `;
      container.prepend(card);
    }
    window.generateWorksheet = generateWorksheet;

    // Initial label render
    applyLabelsToPreview();
  </script>
</body>
</html>
    
